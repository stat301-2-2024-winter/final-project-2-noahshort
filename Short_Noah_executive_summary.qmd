---
title: "Executive Summary: Predicting NBA Player Success"
subtitle: |
  | Final Project 
  | Data Science 2 with R (STAT 301-2)
author: "Noah Short"
date: today

format:
  html:
    toc: true
    embed-resources: true
    
execute:
  echo: false
  warning: false

from: markdown+emoji 
reference-location: margin
citation-location: margin
---

::: {.callout-tip icon=false}

## Github Repo Link

[My Final Project Repo](https://github.com/stat301-2-2024-winter/final-project-2-noahshort.git)

:::

## Purpose

The goal of this project was to predict an NBA player's Wins Above Replacement (WAR) in the "next" season based on statistics from the "current" year and biographical information. The personal purpose for this project was to get exposure with some advanced analytics in a sporting context and test myself in terms of how strong of a model I could create from the skills I've earned so far. The literal purpose for this project is to project players that will be most valuable in terms of WAR in the following season. 

## Background and Setup

The data for this project came from two sources. 

- Statistics-heavy data from Fivethirtyeight

- Background-heavy data from Kaggle

The data span 25 seasons, 1997 - 2021, and contains 11,583 observations of player statistics and details for the season. Players in their final season had missing values for the outcome variable, next season's WAR, so I imputed using the ratio of their WAR and the median WAR for the league within that season multiplied by the median war for the league in the next season.

I split the data by season, yielding an 82:18 split between the training and testing sets. I resampled the data using v-fold cross validation such that each model was fitted 30 times. 

I developed 2 recipes: one that was heavier on statistics and one that was heavier on the biographical information.

6 models were used with tuning on 4 of them: Null, Linear, Elastic net (penalty and mixture tuned), K-Nearest Neighbors (neighbors tuned), Random Forest (min_n and mtry tuned), and Boosted Trees (min_n, mtry, and learn_rate tuned)

## Findings

Here are the best runs of each model type for both recipes:

```{r}
#| label: model results
#| echo: false
#| warning: false

load("results/best_models_table.rda")
best_models_table
```

It turns out that more complex models may not be helpful in this context, as the relatively simple Linear model ended up performing the best. 

Here are the results of fitting this Linear model to the testing set:

![Predicted vs. True Values](plots/basketball_results_plot.png)

```{r}
#| label: final fit results
#| echo: false
#| warning: false


load("results/basketball_test_metrics.rda")


basketball_test_metrics
```

- The average square root of the squared difference between the true and predicted values is 1.99 wins above replacement.

- Our model accounts for 56.8% of the variance in the WAR value for a player in the following season.

- The average difference between the true and predicted values is 1.34 wins above replacement.

Overall, I do not think the model is at workable level for the real world yet. The improvement from the null model shows promise, but the average RMSE and MAE are still too large to rely on the model for accurate results. 

The test results provide a couple of key takeaways for how I could improve the model in the future:

- More Predictors: This is a fairly straightforward one, but given most models had similar performance across both recipes, it seems clear that (at least in the linear case) we could see some marginal improvements with more predictors, assuming they are indicative.

- Better Indication for Elite Players: The model was scared to overestimate WAR for players with very high true WARs, so including an indicator for personal accolades such as awards or all-pro team selections could push the model to not be as timid.


## References

- Silver, Nate. “Introducing Raptor, Our New Metric for the Modern NBA.” FiveThirtyEight, FiveThirtyEight, 10 Oct. 2019, [fivethirtyeight.com/features/introducing-raptor-our-new-metric-for-the-modern-nba/.](fivethirtyeight.com/features/introducing-raptor-our-new-metric-for-the-modern-nba/) 


## Data Sources
[Advanced Metrics Raptor Data - FiveThirtyEight](https://github.com/fivethirtyeight/data/blob/master/nba-raptor/historical_RAPTOR_by_player.csv)

[Draft Data - Kaggle](https://www.kaggle.com/datasets/justinas/nba-players-data?resource=download)

